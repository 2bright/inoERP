<?phpif(!empty($$class->ar_transaction_adjustment_id)){ $mode = 2; $readonly = 1;}$class_second = 'ar_transaction_line';$$class_second = &$ar_transaction_line;$$class->document_type = 'Batch';$$class->reference_type = 'table';if (!empty($_GET['ar_transaction_header_id'])) { $ar_transaction_header_id = ($_GET["ar_transaction_header_id"]); $pm_batch = ar_transaction_header::find_by_id($ar_transaction_header_id);} else if (!empty($_GET["transaction_number"])) { $transaction_number = $_GET["transaction_number"]; $pm_batch = ar_transaction_header::find_by_batchName($transaction_number); $ar_transaction_header_id = $pm_batch->ar_transaction_header_id;}else if (!empty($$class->ar_transaction_header_id)) { $ar_transaction_header_id = $$class->ar_transaction_header_id; $pm_batch = ar_transaction_header::find_by_id($ar_transaction_header_id);}if (!empty($ar_transaction_header_id) && empty($$class->ar_transaction_adjustment_id)) { $$class->org_id = $pm_batch->org_id; $$class->ar_transaction_header_id = $ar_transaction_header_id; $$class->transaction_number = $pm_batch->transaction_number; $pm_batch_bom_object = pm_batch_operation_line::find_operationDetails_by_batchHeaderId($ar_transaction_header_id); if (count($pm_batch_bom_object) == 0) {  $pm_batch_bom_object = [new ar_transaction_line()]; }}else if (!empty($ar_transaction_header_id) && !empty($$class->ar_transaction_adjustment_id)) { $$class->transaction_number = $pm_batch->transaction_number; $pm_batch_bom_object = [$$class]; if (count($pm_batch_bom_object) == 0) {  $pm_batch_bom_object = [new ar_transaction_line()]; }}?><?phpif ((!empty($ar_transaction_header_id)) && !empty($pm_batch_bom_object)) { $transaction_line_stament = '<select class=" select transaction_line large" name="transaction_line[]">'; $transaction_line_stament .= '<option></option>'; foreach ($pm_batch_bom_object as $array) {  $transaction_line_stament .='<option ';  $transaction_line_stament .=' data-pm_batch_operation_detail_id ="' . $array->pm_batch_operation_detail_id . '"';  $transaction_line_stament .=' data-resource_sequence ="' . $array->resource_sequence . '"';  $transaction_line_stament .=' data-resource_usage ="' . $array->resource_usage . '"';  $transaction_line_stament .=' data-step_no ="' . $array->step_no . '"';  $transaction_line_stament .=' data-batch_quantity ="' . $array->batch_quantity . '"';  $transaction_line_stament .=' data-pm_batch_operation_line_id ="' . $array->pm_batch_operation_line_id . '"';  $transaction_line_stament .=' data-pm_process_routing_header_id ="' . $array->pm_process_routing_header_id . '"';  $transaction_line_stament .=' data-activity_code ="' . $array->activity_code . '"';  $transaction_line_stament .=' data-activity_factror ="' . $array->activity_factror . '"';  $transaction_line_stament .=' value="' . $array->pm_batch_operation_detail_id . '" >';  $transaction_line_stament .=  'Step-'. $array->step_no . ' | ' . $array->resource_sequence . ' | ' . $array->activity_code;  $transaction_line_stament .= '</option>'; } $transaction_line_stament .= '</select>';} if (empty($$class->transaction_date)) {  $$class->transaction_date = current_time(true); } $$class->transaction_type = 'ADJ';?>