<?phpclass org extends dbObject { protected static $table_name = "org"; public static $field_array = [		 "org_id",		 "org",		 "type",		 "code",		 "description",		 "enterprise_org_id",		 "legal_org_id",		 "business_org_id",		 "inventory_org_id",		 "address_id",		 "efid",		 "status",		 "rev_enabled",		 "rev_number",		 "created_by",		 "creation_date",		 "last_update_by",		 "last_update_date" ]; public static $initial_search_array = [		 "org_id",		 "org",		 "type",		 "code",		 "description", ]; public static $checkbox_array = [ ]; public static $column_array = [		 "org_id",		 "org",		 "type",		 "code",		 "description", ]; public static $external_array = [		 "org_id",		 "org",		 "type",		 "code",		 "description", ]; public static $base_encoded_array = []; public static $requiredField_array = [		 "org",		 "type",		 "code",		 "description", ]; public static $primary_column = "org_id"; public $org_id; public $org; public $type; public $name; public $code; public $description; public $enterprise_org_id; public $legal_org_id; public $business_org_id; public $inventory_org_id; public $address_id; public $efid; public $status; public $rev_enabled; public $rev_number; public $created_by; public $creation_date; public $last_update_by; public $last_update_date; public $time; public $error = array(); public $msg; public static $dir = __DIR__; public function _after_save() {	global $db;	if (!empty($this->org_type)) {	 $org_type = $this->org_type;	 switch ($org_type) {		case "ENTERPRISE":		 $sql = " UPDATE `org` SET           `enterprise_org_id` = '{$this->org_id}',          WHERE `org_id` = '{$this->org_id}' ";		 break;		case "LEGAL_ORG":		 $sql = " UPDATE `org` SET           `legal_org_id` = '{$this->org_id}',          WHERE `org_id` = '{$this->org_id}' ";		 break;		case "BUSINESS_ORG":		 $sql = " UPDATE `org` SET           `business_org_id` = '{$this->org_id}',          WHERE `org_id` = '{$this->org_id}' ";		 break;		case "INVENTORY_ORG":		 $sql = " UPDATE `org` SET           `inventory_org_id` = '{$this->org_id}',          WHERE `org_id` = '{$this->org_id}' ";		 break;		default:		 break;	 }	}	if (!empty($sql)) {	 if ($db->query($sql)) {		$this->msg = 1;	 } else {		$this->msg = 0;	 }	}	return $this->msg; } Public static function org_types() {//    $org_header = option_header::find_by_id('77');	$org_header = option_header::find_by_name('ORG_TYPE');	$type = option_line::find_by_option_id($org_header->option_header_id);	return $type; } public static function find_all_headers() {	$sql = " SELECT * FROM " . self::$table_name;	$result = self::find_by_sql($sql);	return $result; } public static function find_all_by_org_type($org_type) {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%{$org_type}%' ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_enterprise() {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%ENTERPRISE%' ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_legal() {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%LEGAL_ORG%' ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_business() {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%BUSINESS_ORG%' ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_inventory() {	$sql = " SELECT * FROM ";	$sql .= self::$table_name;	$sql .= " WHERE type LIKE '%INVENTORY_ORG%' ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_item_master() {	$sql = "SELECT org.org_id, org.org, org.code, org.type, org.description            FROM org, inventory " .					" WHERE org.type = 'INVENTORY_ORG'             AND inventory.org_id=org.org_id             AND inventory.item_master_cb=1 ";	$result = self::find_by_sql($sql);	return $result; } public static function find_all_item_master_orgIds_array() {	global $db;$sql = "SELECT org.org_id FROM org, inventory " .					" WHERE org.type = 'INVENTORY_ORG'             AND inventory.org_id=org.org_id             AND inventory.item_master_cb=1 ";	$result_array = $db->result_array_assoc($sql);	return $result_array; } public static function find_legal_orgs_of_enterprise($enterprise_id) {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%LEGAL_ORG%' " .					" AND enterprise_org_id={$enterprise_id} ";	$result = self::find_by_sql($sql);	return $result; } public static function find_business_orgs_of_legal($legal_id) {	$sql = " SELECT * FROM " .					self::$table_name .					" WHERE type LIKE '%BUSINESS_ORG%' " .					" AND legal_org_id={$legal_id} ";	$result = self::find_by_sql($sql);	return $result; } public static function find_enterprise_by_enterprise_org_id($enterprise_id) {	global $db;	$sql = "SELECT * FROM " . self::$table_name . "       where enterprise_org_id={$enterprise_id}        AND type='ENTERPRISE' LIMIT 1";	$result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false; } public static function find_by_legal_org_id($legal_id) {	global $db;	$sql = "SELECT * FROM " . self::$table_name . "       where legal_org_id={$legal_id}        AND type='LEGAL_ORG' LIMIT 1";	$result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false; } public static function find_by_business_org_id($business_id) {	global $db;	$sql = "SELECT * FROM " . self::$table_name . "       where business_org_id={$business_id}        AND type='BUSINESS_ORG' LIMIT 1";	$result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false; } public static function find_by_inventory_org_id($inventory_id) {	global $db;	$sql = "SELECT * FROM " . self::$table_name . "       where inventory_org_id={$inventory_id}        AND type='INVENTORY_ORG' LIMIT 1";	$result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false; } public static function print_orgDetails_inLine($org_id) {	$org = org::find_by_id($org_id);	$org_details = '<h2>' . $org->description . '</h2>';	if (!empty($org_id->address_id)) {	 $address = address::find_by_id($org_id->address_id);	 $address_value = address::show_adrees_details_inLine($address);	 $org_details .= $address_value;	}	$org_type = $org->type;	switch ($org_type) {	 case "ENTERPRISE":		break;	 case "LEGAL_ORG":		$legal = legal::find_by_orgId($org_id);		$org_details .= "<br/>Registration Number : $legal->registration_number";		break;	 case "BUSINESS_ORG":		$legal = legal::find_by_orgId($org->legal_org_id);		$org_details .= "<br/>Registration Number : $legal->registration_number";		break;	 case "INVENTORY_ORG":		break;	 default:		break;	}	return $org_details; }}//end of path class?>