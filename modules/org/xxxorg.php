<?php include_once("../../include/basics/header.inc"); ?> <?php require_once ('class.org_header.inc'); ?> <?php require_once ('class.org_line.inc'); ?> <script src="org.js"></script><?php//set the option id of option line as 0//@required : To create line form for new entry//@required : To create line form where only header is entered$types = org_header::org_types();$org = new org_header;$org->org_id = "";$org->type = "";$org->name = "";$org->code = "";$org->description = "";$org->enterprise_id = "";$org->legal_id = "";$org->business_id = "";$org->organization_id = "";$org->ef_id = "";$org->legal_id = "";$org->status = "";$org->rev_enabled = "";$org->rev_number = "";$org->address_id = "";$org->created_by = "";$org->creation_date = "";$org->last_update_by = "";$org->last_update_date = "";$address = new address();$address->address_id = "";$address->type = "";$address->name = "";$address->description = "";$address->phone = "";$address->email = "";$address->website = "";$address->value = "";$address->country = "";$address->postal_code = "";?><?phpif (!empty($_GET["org_id"])) {  $org_id = $_GET["org_id"];  $org = org_header::find_by_id($org_id);    if (!empty($org->address_id)){    $address = address::find_by_id($org->address_id);  }}?><?php$msg = array();if (!empty($_POST['submit_header'])) {  $org = new org_header();  if (empty($_POST['org_id'])) {    $org->org_id = null;  } else {    $org->org_id = trim(mysql_prep($_POST['org_id']));  }  $org->type = trim(mysql_prep($_POST['type']));  $org->name = trim(mysql_prep($_POST['name']));  $org->code = trim(mysql_prep($_POST['code']));  $org->description = trim(mysql_prep($_POST['description']));  switch ($org->type) {    case "ENTERPRISE":      $org->enterprise_id = '';      $org->legal_id = '';      $org->business_id = '';      $org->inventory_id = '';      break;    case "LEGAL_ORG":      $org->enterprise_id = trim(mysql_prep($_POST['enterprise_id']));      $org->legal_id = '';      $org->business_id = '';      $org->inventory_id = '';      break;    case "BUSINESS_ORG":      $org->enterprise_id = trim(mysql_prep($_POST['enterprise_id']));      $org->legal_id = trim(mysql_prep($_POST['legal_id']));      $org->business_id = '';      $org->inventory_id = '';      break;    case "INVENTORY_ORG":      $org->enterprise_id = trim(mysql_prep($_POST['enterprise_id']));      $org->legal_id = trim(mysql_prep($_POST['legal_id']));      $org->business_id = trim(mysql_prep($_POST['business_id']));      $org->inventory_id = '';      break;    default:      $org->enterprise_id = trim(mysql_prep($_POST['enterprise_id']));      $org->legal_id = trim(mysql_prep($_POST['legal_id']));      $org->business_id = trim(mysql_prep($_POST['business_id']));      $org->inventory_id = trim(mysql_prep($_POST['inventory_id']));      break;  }  $org->ef_id = trim(mysql_prep($_POST['ef_id']));  $org->status = trim(mysql_prep($_POST['status']));  $org->rev_enabled = trim(mysql_prep($_POST['rev_enabled']));  $org->rev_number = trim(mysql_prep($_POST['rev_number']));  $org->address_id = trim(mysql_prep($_POST['address_id']));  $time = time();  $org->creation_date = strftime("%d-%m-%Y %H:%M:%S", $time);  $org->created_by = $_SESSION['user_name'];  if (empty($org->type) || empty($org->name) || empty($org->description)) {    $msg = "Name, Type , Description or module is empty";  } else {    $new_org_entry = $org->save();    if ($new_org_entry == 1) {      $msg = 'Org is sucessfully saved';   }//end of option entry & msg    else {      $msg = "Record coundt be saved!!" . mysql_error() .              ' Returned Value is : ' . $new_option_entry;    }//end of option insertion else  }//end of option check & new option creation}//end of post submit header?><div id="structure">  <div id="option">    <div id="form_top">      <ul class="form_top">        <li><input type="button" class="button refresh" value="Refresh" name="refresh"/> </li>        <li> <a class="button" href="org.php">New Object</a> </li>         <li><input type="submit" class="button" form="org_header" name="submit_header" id="submit_header" Value="Save"></li>        <li> <input type="button" class="button remove_row" id="remove_row" Value="Remove"></li>        <li> <input type="submit" class="button delete" form="coa_combination_form" name="delete_row" id="delete_row" value="Delete"></li>        <li><input type="reset" class="button" name="reset" form="org_line" Value="Reset All"></li>        <li><script>document.write('<a class="button" href="' + document.referrer + '">Go Back</a>');</script></li>      </ul>    </div>    <!--Start of the option header   First check if $org_id_l fetched from $_GET variable   If the value exists then fetch the object from option_header table & show the object   If the value is not set then make it zero & show a blank form-->    <!--    START OF FORM HEADER-->    <div id ="form_header">       <form action="org.php"  method="post" id="org_header"  name="org_header">         <ul id="form_box">           <li>   <!--    Place for showing error messages-->             <?php                 if (!empty($msg)){                   echo '<span id="formerror" class="error">';                   if (is_array($msg)) {                foreach ($msg as $key => $value) {                  $x = $key + 1;                  echo 'Record ' . $x . ' : ' . $value . '<br />';                }              } else {                echo $msg;              }              echo '</span>';             }             ?>              <div id="loading"><img alt="Loading..."                                    src="<?php echo HOME_URL; ?>themes/images/loading.gif"/></div>            <!--    End of place for showing error messages-->          </li>          <h9>New Option Entry! </h9>          <li class="ncontrol"><span class="heading">Org Header </span>             <div class="three_column">               <ul>                 <li>                   <label><a href="find_org.php" class="popup">                       <img src="<?php echo HOME_URL; ?>themes/images/serach.png"/></a>                     Org Id : </label>                   <input type="text" readonly name="org_id" value="<?php echo htmlentities($org->org_id); ?>"                          maxlength="50" id="org_id" placeholder="System generated number">                   <a name="show" href="org.php?org_id=" class="show">                    <img src="<?php echo HOME_URL; ?>themes/images/refresh.png"/></a>                 </li>                 <li><label>Org Type : </label>                   <select name="type" id="org_type" >                     <option value="" ></option>                     <?php                    for ($i = 0; $i <= 3; $i++) {                      echo '<option value="' . $types[$i]->option_line_code .'"';                      echo $types[$i]->option_line_code == $org->type ? 'selected' : 'NONE';                      echo '>' . $types[$i]->option_line_code . '</option>';                    }                    ?>                   </select>                 </li>                 <li><label>Name : </label>                   <input type="text" name="name" value="<?php echo htmlentities($org->org);                    ?>" maxlength="50"  id="name">                 </li>                 <li><label>Code : </label>                   <input type="text" name="code" value="<?php echo htmlentities($org->code);                    ?>" maxlength="5"  id="code">                 </li>                 <li><label>Enterprise : </label>                       <select name="enterprise_id" id="enterprise_id"  class="enterprise_id" required>                         <?php                        if (empty($org->type)) {                          echo '<option value=" " disabled selected>Select Org Type</option> ';                        } else {                          $enterprise = org_header::find_by_id($org->enterprise_id);                          echo '<option value="' . htmlentities($org->enterprise_id) . '" >' .                          htmlentities($enterprise->org) . '</option>';                        }                        ?>                       </select>               </li>             <li><label>Legal Org  : </label>                       <select name="legal_id" id="legal_id"  class="legal_id" required>                         <?php                        if (empty($org->type)) {                          echo '<option value=" " disabled selected>Select Org Type</option> ';                        } else {                          $legal_org = org_header::find_by_id($org->legal_id);                          echo '<option value="' . htmlentities($org->legal_id) . '" >' .                          htmlentities($legal_org->org) . '</option>';                        }                        ?>                       </select>               </li>                <li><label>Business Org  : </label>                       <select name="business_id" id="business_id"  class="business_id" required>                         <?php                        if (empty($org->type)) {                          echo '<option value=" " disabled selected>Select Org Type</option> ';                        } else {                          $business_org = org_header::find_by_id($org->business_id);                          echo '<option value="' . htmlentities($org->business_id) . '" >' .                          htmlentities($business_org->org) . '</option>';                        }                        ?>                       </select>                </li>                 <li><label>Description : </label>                   <input type="text" name="description" value="<?php echo htmlentities($org->description);                    ?>" maxlength="50" id="description">                 </li>                 <li><label>Extra Field : </label>                   <input type="text" name="ef_id" value="<?php echo htmlentities($org->ef_id);                    ?>" maxlength="50"  id="ef_id">                 </li>                 <li><label>Status : </label>                  <Select name="status" id="status" >                    <option value="" ></option>                    <option value="enabled"                     <?php echo $org->status == 'enabled' ? 'selected' : ''; ?> >Enabled</option>                    <option value="disabled"                     <?php echo $org->status == 'disabled' ? 'selected' : ''; ?> >Disabled</option>                                                     </select>                </li>                <li><label>Revision : </label>                  <Select name="rev_enabled" id="rev_enabled">                     <option value="" ></option>                       <option value="enabled"                     <?php echo $org->rev_enabled == 'enabled' ? 'selected' : ''; ?> >Enabled</option>                    <option value="disabled"                     <?php echo $org->rev_enabled == 'disabled' ? 'selected' : ''; ?>>Disabled</option>                                                     </select>                </li>                <li><label>Revision No: </label>                   <input type="text"  name="rev_number" value="<?php echo htmlentities($org->rev_number);                            ?>" maxlength="50" id="rev_number">                 </li>                <li>                  <label>Address Id: <a href="address/find_address.php" class="address_popup">                       <img src="<?php echo HOME_URL; ?>themes/images/serach.png"/></a> </label>                   <input type="text"  name="address_id" value="<?php echo htmlentities($org->address_id);                            ?>" maxlength="50" id="address_id">                 </li>               </ul>             </div>                         <!--start of address details-->            <span class="heading">Address Details </span>             <div class="three_column">               <ul class="address">                <li><label>Phone  : </label>                   <input type="text" readonly name="phone" maxlength="25" id="phone" size="25"                          placeholder="Phone number" value="<?php echo htmlentities($address->phone); ?>">                </li>                <li><label>Email  : </label>                   <input type="text" readonly name="email" maxlength="50" id="postal_code" size="25"                          placeholder="Email address" value="<?php echo htmlentities($address->email); ?>">                </li>                <li><label>Web-site  : </label>                   <input type="text"  readonly name="website" maxlength="50" id="country" size="25"                          placeholder="Official Website" value="<?php echo htmlentities($address->website); ?>">                </li>                <li><label>Country  : </label>                   <input type="text" readonly name="country" maxlength="50" id="country" size="25"                          placeholder="Country name" value="<?php echo htmlentities($address->country); ?>">                </li>                <li><label>Postal Code  : </label>                   <input type="text"  readonly name="postal_code" maxlength="25" id="postal_code" size="25"                          placeholder="Postal/Zip code" value="<?php echo htmlentities($address->postal_code); ?>">                </li>                <li><label>Address :</label>                    <textarea readonly name="value" id="value" cols="22" rows="3" placeholder="Select address Id"><?php 									echo trim(htmlentities($address->value)); ?></textarea>                </li>              </ul>            </div>                      </li>         </ul>       </form>     </div>    <!--END OF FORM HEADER-->    <!--Start of the option line    First check if $org_id_l fetched from $_GET variable    If the value exists then fetch the object from database & show the object    If the value is not set then make it zero & show a blank form-->      </div></div><!--   end of structure--><?php include_template('footer.inc') ?>