<?phpif (!empty($_GET['bu_org_id'])) { $$class->bu_org_id = $_GET['bu_org_id'];}if (!empty($_GET['po_header_id'])) { $$class->po_header_id = $_GET['po_header_id']; $$class->get_details_from_po_header();}if (!empty($$class->bu_org_id)) { $legal_org_id = org::find_by_id($$class->bu_org_id)->legal_org_id; $ledger_id = legal::find_by_orgId($legal_org_id)->ledger_id; $$class->ledger_id = $ledger_id;}if (!empty($$class->po_header_id)) { $po = new po_header(); $po_i = $po->findBy_id($$class->po_header_id); $$class->po_number = $po_i->po_number;}if (!empty($$class->ledger_id)) { $ledger = new gl_ledger(); $ledger_i = $ledger->findBy_id($$class->ledger_id); $$class->currency = $ledger_i->currency_code; $gp = new gl_period(); $all_open_periods = $gp->find_all_periods($$class->ledger_id, 'OPEN'); if (empty($$class->period_id)) {	$$class->period_id = $gp->current_open_period($$class->ledger_id, 'OPEN'); } $period_name_stmt = form::select_field_from_object('period_id', $all_open_periods, 'gl_period_id', 'period_name', $$class->period_id, 'gl_period_id', '', '', '', 1);}if (!empty($$class->supplier_id)) { $sup = new supplier(); $sup_i = $sup->findBy_id($$class->supplier_id); $$class->supplier_name = $sup_i->supplier_name; $$class->supplier_number = $sup_i->supplier_number;}if (!empty($$class->supplier_site_id)) { $ss = new supplier_site(); $ss_i = $ss->findBy_id($$class->supplier_site_id); $supplier_site_obj = []; array_push($supplier_site_obj, $ss_i); $supplier_site_name_statement = $f->select_field_from_object('supplier_site_id', $supplier_site_obj, 'supplier_site_id', 'supplier_site_name', $$class->supplier_site_id, '', 'supplier_site_id', 1, $readonly1);}if(isset($ap_payment_header)){$supplier_name_stmt = $f->text_field('supplier_name', $ap_payment_header->supplier_name, '20', 'supplier_name', 'select_supplier_name', 1, $readonly1);$supplier_number_stmt = $f->text_field('supplier_number', $ap_payment_header->supplier_number, '8', 'supplier_number', 'select_supplier_number', 1, $readonly1);}if (!empty($ap_payment_line_object)) { foreach ($ap_payment_line_object as &$ap_payment_lines) {	if (!empty($ap_payment_lines->ap_transaction_header_id)) {	 $apth = new ap_transaction_header();	 $apth_i = $apth->findBy_id($ap_payment_lines->ap_transaction_header_id);	 $ap_payment_lines->transaction_number = $apth_i->transaction_number;	 $ap_payment_lines->invoice_amount  = $apth_i->header_amount;	 $ap_payment_lines->paid_amount = $apth_i->paid_amount;	 $ap_payment_lines->remaining_amount = $apth_i->header_amount - $apth_i->paid_amount;	} else {	 $ap_payment_lines->remaining_amount = null;	 $ap_payment_lines->transaction_number = null;	 $ap_payment_lines->invoice_amount  = null;	 $ap_payment_lines->paid_amount  = null;	}	 }}if((!empty($$class->approval_status))&&($$class->approval_status == 'CANCELLED')){ $mode=2; $readonly=1;}?>